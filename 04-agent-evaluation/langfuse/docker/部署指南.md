# Langfuse Docker Compose éƒ¨ç½²æŒ‡å—

> **é€‚ç”¨åœºæ™¯**: æœ¬åœ°å¼€å‘ã€æµ‹è¯•ç¯å¢ƒã€å°è§„æ¨¡ç”Ÿäº§ç¯å¢ƒ
> 
> **ç›®æ ‡è¯»è€…**: å¤§æ¨¡å‹æ™ºèƒ½ä½“è¯„ä¼°ä¸­é«˜çº§å­¦ä¹ è€…
> 
> **ç‰ˆæœ¬**: Langfuse v3 / Docker Compose

---

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [å‰ç½®è¦æ±‚](#å‰ç½®è¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†é…ç½®è¯´æ˜](#è¯¦ç»†é…ç½®è¯´æ˜)
- [å®‰å…¨åŠ å›º](#å®‰å…¨åŠ å›º)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [æ•°æ®å¤‡ä»½ä¸æ¢å¤](#æ•°æ®å¤‡ä»½ä¸æ¢å¤)
- [å‡çº§æŒ‡å—](#å‡çº§æŒ‡å—)

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### Langfuse æ˜¯ä»€ä¹ˆï¼Ÿ

Langfuse æ˜¯ä¸€ä¸ªå¼€æºçš„ LLM å·¥ç¨‹å¹³å°ï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- **è¿½è¸ªä¸ç›‘æ§**: è®°å½•å’Œå¯è§†åŒ– LLM åº”ç”¨çš„æ¯ä¸€æ¬¡è°ƒç”¨
- **æç¤ºè¯ç®¡ç†**: ç‰ˆæœ¬æ§åˆ¶ã€A/B æµ‹è¯•ã€æç¤ºè¯ä¼˜åŒ–
- **è¯„ä¼°ä¸æ ‡æ³¨**: è‡ªåŠ¨åŒ–å’Œäººå·¥è¯„ä¼° LLM è¾“å‡ºè´¨é‡
- **æ•°æ®é›†ç®¡ç†**: æ„å»ºæµ‹è¯•æ•°æ®é›†ï¼ŒæŒç»­è¯„ä¼°æ¨¡å‹æ€§èƒ½
- **æˆæœ¬åˆ†æ**: è¿½è¸ª Token ä½¿ç”¨å’Œ API è°ƒç”¨æˆæœ¬

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Langfuse ç³»ç»Ÿæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Langfuse Web â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚Langfuse Workerâ”‚                  â”‚
â”‚  â”‚  (ç«¯å£ 3000) â”‚        â”‚  (ç«¯å£ 3030)  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                       â”‚                            â”‚
â”‚         â–¼                       â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  PostgreSQL  â”‚        â”‚  ClickHouse  â”‚                   â”‚
â”‚  â”‚  (ç«¯å£ 5432) â”‚        â”‚  (ç«¯å£ 8123) â”‚                   â”‚
â”‚  â”‚  å…³ç³»å‹æ•°æ®   â”‚        â”‚  åˆ—å¼æ•°æ®åº“   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                       â”‚                            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                     â–¼                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚    Redis     â”‚                                â”‚
â”‚              â”‚  (ç«¯å£ 6379) â”‚                                â”‚
â”‚              â”‚  ç¼“å­˜/é˜Ÿåˆ—    â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚    MinIO     â”‚                                â”‚
â”‚              â”‚  (ç«¯å£ 9090) â”‚                                â”‚
â”‚              â”‚  å¯¹è±¡å­˜å‚¨     â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶è¯´æ˜

| ç»„ä»¶ | èŒè´£ | èµ„æºéœ€æ±‚ | ç«¯å£ |
|------|------|---------|------|
| **langfuse-web** | Web UI å’Œ REST API | 2GB å†…å­˜ | 3000 |
| **langfuse-worker** | åå°ä»»åŠ¡å¤„ç† | 2GB å†…å­˜ | 3030 |
| **PostgreSQL** | å…ƒæ•°æ®å­˜å‚¨ | 2GB å†…å­˜, 20GB ç£ç›˜ | 5432 |
| **ClickHouse** | è¿½è¸ªæ•°æ®å­˜å‚¨ | 4GB å†…å­˜, 100GB ç£ç›˜ | 8123, 9000 |
| **Redis** | ç¼“å­˜å’Œé˜Ÿåˆ— | 1GB å†…å­˜ | 6379 |
| **MinIO** | å¯¹è±¡å­˜å‚¨ | 1GB å†…å­˜, 50GB ç£ç›˜ | 9090, 9091 |

**æ¨èé…ç½®**: 
- **æœ€å°é…ç½®**: 4 æ ¸ CPU, 8GB å†…å­˜, 100GB ç£ç›˜
- **æ¨èé…ç½®**: 8 æ ¸ CPU, 16GB å†…å­˜, 200GB ç£ç›˜
- **é«˜è´Ÿè½½é…ç½®**: 16 æ ¸ CPU, 32GB å†…å­˜, 500GB ç£ç›˜

---

## âœ… å‰ç½®è¦æ±‚

### 1. æ“ä½œç³»ç»Ÿ

æ”¯æŒä»¥ä¸‹æ“ä½œç³»ç»Ÿï¼š

- âœ… Linux (Ubuntu 22.04+, CentOS 8+, Debian 11+)
- âœ… macOS 12+ (ä½¿ç”¨ Docker Desktop)
- âœ… Windows 10/11 (ä½¿ç”¨ WSL2 + Docker Desktop)

### 2. è½¯ä»¶ä¾èµ–

#### å¿…éœ€è½¯ä»¶

```bash
# Git (ç”¨äºå…‹éš†ä»“åº“)
git --version  # éœ€è¦ 2.0+

# Docker (å®¹å™¨è¿è¡Œæ—¶)
docker --version  # éœ€è¦ 20.10+

# Docker Compose (å®¹å™¨ç¼–æ’)
docker compose version  # éœ€è¦ 2.0+
```

#### å®‰è£… Docker å’Œ Docker Compose

**Ubuntu/Debian:**

```bash
# æ›´æ–°åŒ…ç´¢å¼•
sudo apt-get update

# å®‰è£…ä¾èµ–
sudo apt-get install -y ca-certificates curl

# æ·»åŠ  Docker GPG å¯†é’¥
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# æ·»åŠ  Docker ä»“åº“
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# å®‰è£… Docker
sudo apt-get update
sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# éªŒè¯å®‰è£…
sudo docker run hello-world
```

**macOS/Windows:**

ä¸‹è½½å¹¶å®‰è£… [Docker Desktop](https://www.docker.com/products/docker-desktop/)

### 3. ç½‘ç»œè¦æ±‚

- **å¤–ç½‘è®¿é—®**: éœ€è¦èƒ½è®¿é—® Docker Hub æ‹‰å–é•œåƒ
- **ç«¯å£å¼€æ”¾**: ç¡®ä¿ä»¥ä¸‹ç«¯å£æœªè¢«å ç”¨
  - `3000`: Langfuse Web ç•Œé¢
  - `9090`: MinIO API (å¯é€‰ï¼Œå¦‚éœ€å¤–éƒ¨ä¸Šä¼ åª’ä½“æ–‡ä»¶)
  - `9091`: MinIO ç®¡ç†æ§åˆ¶å° (æœ¬æœºè®¿é—®)

### 4. é˜²ç«å¢™é…ç½®ï¼ˆäº‘æœåŠ¡å™¨ï¼‰

å¦‚æœåœ¨äº‘æœåŠ¡å™¨éƒ¨ç½²ï¼Œéœ€è¦é…ç½®å®‰å…¨ç»„/é˜²ç«å¢™è§„åˆ™ï¼š

```bash
# å…è®¸ Langfuse Web è®¿é—®
å…è®¸å…¥ç«™: TCP 3000 (æ¥æº: 0.0.0.0/0 æˆ–æŒ‡å®š IP)

# å…è®¸ MinIO API è®¿é—®ï¼ˆå¯é€‰ï¼‰
å…è®¸å…¥ç«™: TCP 9090 (æ¥æº: 0.0.0.0/0 æˆ–æŒ‡å®š IP)

# å»ºè®®ç¦æ­¢å…¶ä»–ç«¯å£çš„å¤–éƒ¨è®¿é—®
æ‹’ç»å…¥ç«™: TCP 5432, 6379, 8123, 9000, 9001, 3030
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: å…‹éš†ä»“åº“

```bash
# å…‹éš†ä»£ç 
git clone https://github.com/FlyAIBox/Agent_In_Action.git

# è¿›å…¥ç›®å½•
cd 04-agent-evaluation/langfuse/docker
```

### æ­¥éª¤ 2: é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¼ºçƒˆæ¨èï¼‰ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp env.dev.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

**æœ€å°å¿…è¦é…ç½® (`.env` æ–‡ä»¶å†…å®¹):**

```bash
# =============================================================================
# Langfuse æ ¸å¿ƒé…ç½®
# =============================================================================

# 1. æ•°æ®åº“å¯†ç ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
POSTGRES_PASSWORD=postgres
CLICKHOUSE_PASSWORD=clickhouse

# 2. åŠ å¯†å¯†é’¥ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
# ç”Ÿæˆæ–¹å¼: openssl rand -hex 32
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# 3. ä¼šè¯å¯†é’¥ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
# ç”Ÿæˆæ–¹å¼: openssl rand -base64 32
NEXTAUTH_SECRET=mysecret

# 4. åŠ å¯†ç›å€¼ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
# ç”Ÿæˆæ–¹å¼: openssl rand -base64 32
SALT=mysalt

# 5. Redis å¯†ç ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
# ç”Ÿæˆæ–¹å¼: openssl rand -base64 24
REDIS_AUTH=myredissecret

# 6. MinIO å¯†ç ï¼ˆå¿…æ”¹ï¼ï¼‰
# âš ï¸ å½“å‰ä¸ºé»˜è®¤å€¼ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
# ç”Ÿæˆæ–¹å¼: openssl rand -base64 16
# è¦æ±‚: æœ€å°‘ 8 ä¸ªå­—ç¬¦
MINIO_ROOT_PASSWORD=miniosecret

# =============================================================================
# å¯é€‰é…ç½®
# =============================================================================
# æ— å¤´åˆå§‹åŒ–ï¼ˆè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼‰
LANGFUSE_INIT_USER_EMAIL=admin@example.com
LANGFUSE_INIT_USER_PASSWORD=your_admin_password
LANGFUSE_INIT_USER_NAME=Admin
LANGFUSE_INIT_ORG_NAME=AGENT AI
LANGFUSE_INIT_PROJECT_NAME=Agent101
```

**ç”Ÿæˆå®‰å…¨å¯†é’¥å‘½ä»¤:**

```bash
# ç”Ÿæˆ ENCRYPTION_KEY (64ä½åå…­è¿›åˆ¶)
openssl rand -hex 32

# ç”Ÿæˆ NEXTAUTH_SECRET (Base64)
openssl rand -base64 32

# ç”Ÿæˆéšæœºå¯†ç 
openssl rand -base64 24
```

### æ­¥éª¤ 3: å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆå‰å°è¿è¡Œï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼‰
docker compose up

# æˆ–è€…åå°è¿è¡Œ
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker compose logs -f langfuse-web
```

**å¯åŠ¨è¿‡ç¨‹è¯´æ˜:**

1. **æ‹‰å–é•œåƒ** (é¦–æ¬¡è¿è¡Œï¼Œçº¦ 2-5 åˆ†é’Ÿ)
   ```
   Pulling postgres ... done
   Pulling redis    ... done
   Pulling clickhouse ... done
   Pulling minio    ... done
   Pulling langfuse-worker ... done
   Pulling langfuse-web ... done
   ```

2. **åˆå§‹åŒ–æ•°æ®åº“** (çº¦ 1-2 åˆ†é’Ÿ)
   - PostgreSQL æ•°æ®åº“è¡¨åˆ›å»º
   - ClickHouse æ•°æ®åº“è¡¨åˆ›å»º
   - MinIO å­˜å‚¨æ¡¶åˆ›å»º

3. **æœåŠ¡å°±ç»ª** (çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¡¨ç¤ºæˆåŠŸ)
   ```
   langfuse-web-1    | Ready started server on 0.0.0.0:3000, url: http://localhost:3000
   ```

### æ­¥éª¤ 4: è®¿é—® Langfuse

æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:3000**

**é¦–æ¬¡è®¿é—®:**

- å¦‚æœé…ç½®äº†æ— å¤´åˆå§‹åŒ–ï¼Œç›´æ¥ä½¿ç”¨é…ç½®çš„é‚®ç®±å¯†ç ç™»å½•
- å¦‚æœæœªé…ç½®ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°æ³¨å†Œé¡µé¢ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªç”¨æˆ·

**è®¿é—® MinIO ç®¡ç†æ§åˆ¶å° (å¯é€‰):**

è®¿é—®: **http://localhost:9091**

- ç”¨æˆ·å: `minio` (æˆ–æ‚¨åœ¨ `.env` ä¸­è®¾ç½®çš„ `MINIO_ROOT_USER`)
- å¯†ç : æ‚¨åœ¨ `.env` ä¸­è®¾ç½®çš„ `MINIO_ROOT_PASSWORD`

### æ­¥éª¤ 5: è·å– API å¯†é’¥

1. ç™»å½• Langfuse Web ç•Œé¢
2. è¿›å…¥ **Settings** â†’ **API Keys**
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼ˆç”¨äº SDK é›†æˆï¼‰:
   - `Public Key` (å…¬é’¥)
   - `Secret Key` (ç§é’¥)
   - `Host` (æœåŠ¡å™¨åœ°å€, é»˜è®¤ `http://localhost:3000`)

---

## ğŸ”§ è¯¦ç»†é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡å®Œæ•´åˆ—è¡¨

#### æ ¸å¿ƒè®¤è¯é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…æ”¹ |
|--------|------|--------|------|
| `NEXTAUTH_URL` | åº”ç”¨è®¿é—® URL | `http://localhost:3000` | ç”Ÿäº§ç¯å¢ƒå¿…æ”¹ |
| `NEXTAUTH_SECRET` | JWT ç­¾åå¯†é’¥ | `mysecret` | âœ… æ˜¯ |
| `DATABASE_URL` | PostgreSQL è¿æ¥ä¸² | `postgresql://postgres:postgres@postgres:5432/postgres` | âœ… æ˜¯ (æ”¹å¯†ç ) |
| `SALT` | åŠ å¯†ç›å€¼ | `mysalt` | âœ… æ˜¯ |
| `ENCRYPTION_KEY` | AES-256 åŠ å¯†å¯†é’¥ | `0000...` | âœ… æ˜¯ |

#### ClickHouse é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…æ”¹ |
|--------|------|--------|------|
| `CLICKHOUSE_URL` | HTTP API åœ°å€ | `http://clickhouse:8123` | å¦ |
| `CLICKHOUSE_MIGRATION_URL` | è¿ç§»è¿æ¥åœ°å€ | `clickhouse://clickhouse:9000` | å¦ |
| `CLICKHOUSE_USER` | ç”¨æˆ·å | `clickhouse` | å¦ |
| `CLICKHOUSE_PASSWORD` | å¯†ç  | `clickhouse` | âœ… æ˜¯ |
| `CLICKHOUSE_CLUSTER_ENABLED` | é›†ç¾¤æ¨¡å¼ | `false` | å¦ |

#### Redis é…ç½®

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…æ”¹ |
|--------|------|--------|------|
| `REDIS_HOST` | ä¸»æœºåœ°å€ | `redis` | å¦ |
| `REDIS_PORT` | ç«¯å£ | `6379` | å¦ |
| `REDIS_AUTH` | å¯†ç  | `myredissecret` | âœ… æ˜¯ |
| `REDIS_TLS_ENABLED` | å¯ç”¨ TLS | `false` | å¦ |

#### MinIO / S3 é…ç½®

**äº‹ä»¶æ•°æ®å­˜å‚¨:**

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `LANGFUSE_S3_EVENT_UPLOAD_BUCKET` | å­˜å‚¨æ¡¶å | `langfuse` |
| `LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID` | è®¿é—®å¯†é’¥ ID | `minio` |
| `LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY` | è®¿é—®å¯†é’¥ | `miniosecret` âœ… å¿…æ”¹ |
| `LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT` | å†…éƒ¨ç«¯ç‚¹ | `http://minio:9000` |

**åª’ä½“æ–‡ä»¶ä¸Šä¼ :**

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT` | å¤–éƒ¨ç«¯ç‚¹ | `http://localhost:9090` |
| `LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY` | è®¿é—®å¯†é’¥ | `miniosecret` âœ… å¿…æ”¹ |

**æ‰¹é‡å¯¼å‡º:**

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `LANGFUSE_S3_BATCH_EXPORT_ENABLED` | å¯ç”¨å¯¼å‡º | `false` |
| `LANGFUSE_S3_BATCH_EXPORT_EXTERNAL_ENDPOINT` | ä¸‹è½½ç«¯ç‚¹ | `http://localhost:9090` |

#### æ— å¤´åˆå§‹åŒ–é…ç½®

| å˜é‡å | è¯´æ˜ | ç”¨é€” |
|--------|------|------|
| `LANGFUSE_INIT_USER_EMAIL` | ç®¡ç†å‘˜é‚®ç®± | è‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ· |
| `LANGFUSE_INIT_USER_PASSWORD` | ç®¡ç†å‘˜å¯†ç  | ç™»å½•å‡­è¯ |
| `LANGFUSE_INIT_USER_NAME` | ç®¡ç†å‘˜å§“å | æ˜¾ç¤ºåç§° |
| `LANGFUSE_INIT_ORG_NAME` | ç»„ç»‡åç§° | è‡ªåŠ¨åˆ›å»ºç»„ç»‡ |
| `LANGFUSE_INIT_PROJECT_NAME` | é¡¹ç›®åç§° | è‡ªåŠ¨åˆ›å»ºé¡¹ç›® |
| `LANGFUSE_INIT_PROJECT_PUBLIC_KEY` | é¡¹ç›®å…¬é’¥ | ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ |
| `LANGFUSE_INIT_PROJECT_SECRET_KEY` | é¡¹ç›®ç§é’¥ | ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ |

#### é‚®ä»¶æœåŠ¡é…ç½®

| å˜é‡å | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `EMAIL_FROM_ADDRESS` | å‘ä»¶äººåœ°å€ | `noreply@yourdomain.com` |
| `SMTP_CONNECTION_URL` | SMTP è¿æ¥ URL | `smtp://user:pass@smtp.gmail.com:587` |

**é…ç½®é‚®ä»¶æœåŠ¡åå¯ç”¨åŠŸèƒ½:**
- ç”¨æˆ·é‚€è¯·é‚®ä»¶
- å¯†ç é‡ç½®é‚®ä»¶
- ç³»ç»Ÿå‘Šè­¦é€šçŸ¥

---

## ğŸ”’ å®‰å…¨åŠ å›º

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥æ¸…å•

#### âœ… 1. ä¿®æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 

```bash
# æ£€æŸ¥ä»¥ä¸‹å˜é‡æ˜¯å¦å·²ä¿®æ”¹
POSTGRES_PASSWORD=postgres          # âŒ ä¸å®‰å…¨
CLICKHOUSE_PASSWORD=clickhouse      # âŒ ä¸å®‰å…¨
REDIS_AUTH=myredissecret            # âŒ ä¸å®‰å…¨
MINIO_ROOT_PASSWORD=miniosecret     # âŒ ä¸å®‰å…¨
NEXTAUTH_SECRET=mysecret            # âŒ ä¸å®‰å…¨
SALT=mysalt                         # âŒ ä¸å®‰å…¨
```

**å»ºè®®å¯†ç ç­–ç•¥:**
- é•¿åº¦ â‰¥ 16 å­—ç¬¦
- åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
- ä½¿ç”¨å¯†ç ç”Ÿæˆå™¨ç”Ÿæˆ

#### âœ… 2. é…ç½® HTTPS

**æ–¹å¼ä¸€: ä½¿ç”¨ Nginx åå‘ä»£ç†**

åˆ›å»º `nginx.conf`:

```nginx
server {
    listen 80;
    server_name langfuse.yourdomain.com;
    
    # é‡å®šå‘åˆ° HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name langfuse.yourdomain.com;
    
    # SSL è¯ä¹¦é…ç½®
    ssl_certificate /etc/nginx/certs/fullchain.pem;
    ssl_certificate_key /etc/nginx/certs/privkey.pem;
    
    # å®‰å…¨å¤´éƒ¨
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    
    # åå‘ä»£ç†åˆ° Langfuse
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

**æ–¹å¼äºŒ: ä½¿ç”¨ Caddy (è‡ªåŠ¨ HTTPS)**

åˆ›å»º `Caddyfile`:

```caddy
langfuse.yourdomain.com {
    reverse_proxy localhost:3000
}
```

å¯åŠ¨ Caddy:

```bash
caddy run --config Caddyfile
```

**æ›´æ–° Langfuse é…ç½®:**

```bash
# .env æ–‡ä»¶ä¸­æ›´æ–°
NEXTAUTH_URL=https://langfuse.yourdomain.com
```

#### âœ… 3. é™åˆ¶ç½‘ç»œè®¿é—®

**ä»…å¼€æ”¾å¿…è¦ç«¯å£:**

```bash
# é˜²ç«å¢™é…ç½® (Ubuntu/UFW)
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 443/tcp  # HTTPS
sudo ufw enable

# äº‘æœåŠ¡å™¨å®‰å…¨ç»„
# ä»…å…è®¸: TCP 443 (0.0.0.0/0)
# æ‹’ç»: TCP 3000, 9090, 5432, 6379, 8123, 9000
```

**Docker ç½‘ç»œéš”ç¦»:**

åœ¨ `docker-compose.yml` ä¸­ä½¿ç”¨å†…éƒ¨ç½‘ç»œï¼š

```yaml
networks:
  langfuse-internal:
    internal: true
  langfuse-external:

services:
  langfuse-web:
    networks:
      - langfuse-internal
      - langfuse-external
  
  postgres:
    networks:
      - langfuse-internal  # ä»…å†…éƒ¨è®¿é—®
```

#### âœ… 4. å¯ç”¨ Redis TLS

ç”Ÿæˆè¯ä¹¦:

```bash
# ç”Ÿæˆ CA è¯ä¹¦
openssl req -x509 -nodes -newkey rsa:4096 -keyout ca.key -out ca.crt -days 3650

# ç”Ÿæˆ Redis æœåŠ¡å™¨è¯ä¹¦
openssl req -nodes -newkey rsa:4096 -keyout redis.key -out redis.csr
openssl x509 -req -in redis.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out redis.crt -days 3650
```

æ›´æ–°é…ç½®:

```yaml
# docker-compose.yml
redis:
  volumes:
    - ./certs:/certs:ro
  command: >
    --requirepass ${REDIS_AUTH}
    --tls-port 6379
    --port 0
    --tls-cert-file /certs/redis.crt
    --tls-key-file /certs/redis.key
    --tls-ca-cert-file /certs/ca.crt

# .env
REDIS_TLS_ENABLED=true
REDIS_TLS_CA=/certs/ca.crt
REDIS_TLS_CERT=/certs/redis.crt
REDIS_TLS_KEY=/certs/redis.key
```

#### âœ… 5. æ•°æ®åŠ å¯†

**å¯ç”¨æ•°æ®åº“åŠ å¯†:**

```bash
# PostgreSQL é€æ˜æ•°æ®åŠ å¯†
# éœ€è¦ PostgreSQL ä¼ä¸šç‰ˆæˆ–ç¬¬ä¸‰æ–¹æ‰©å±•

# ClickHouse åˆ—çº§åŠ å¯†
# åœ¨ Langfuse ä¸­å·²é€šè¿‡ ENCRYPTION_KEY å®ç°
```

#### âœ… 6. å®šæœŸå®‰å…¨å®¡è®¡

```bash
# æ£€æŸ¥å®¹å™¨å®‰å…¨æ¼æ´
docker scout cves langfuse/langfuse:3
docker scout cves postgres:17
docker scout cves clickhouse/clickhouse-server

# æ£€æŸ¥å¼€æ”¾ç«¯å£
sudo netstat -tuln | grep LISTEN

# æ£€æŸ¥ Docker å®¹å™¨æ—¥å¿—
docker compose logs --tail=100 | grep -i error
```

---

## â“ å¸¸è§é—®é¢˜

### 1. å®¹å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**: `docker compose up` æŠ¥é”™

**å¯èƒ½åŸå› åŠè§£å†³æ–¹æ¡ˆ:**

#### ç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :3000
sudo lsof -i :5432

# å…³é—­å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹ç«¯å£
# åœ¨ docker-compose.yml ä¸­ä¿®æ”¹:
ports:
  - "3001:3000"  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

#### ç£ç›˜ç©ºé—´ä¸è¶³

```bash
# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ¸…ç† Docker èµ„æº
docker system prune -a --volumes

# æŸ¥çœ‹ Docker ç£ç›˜ä½¿ç”¨
docker system df
```

#### å†…å­˜ä¸è¶³

```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# å¢åŠ  Docker Desktop å†…å­˜é™åˆ¶
# macOS/Windows: Docker Desktop â†’ Settings â†’ Resources â†’ Memory

# Linux: æ£€æŸ¥ç³»ç»Ÿå†…å­˜
cat /proc/meminfo
```

### 2. æ— æ³•è®¿é—® Langfuse Web ç•Œé¢

**ç—‡çŠ¶**: æµè§ˆå™¨æ— æ³•æ‰“å¼€ http://localhost:3000

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker compose ps

# 2. æŸ¥çœ‹æ—¥å¿—
docker compose logs langfuse-web

# 3. ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨ï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰
# çœ‹åˆ° "Ready started server" æ—¥å¿—åå†è®¿é—®

# 4. å¦‚æœæ˜¯äº‘æœåŠ¡å™¨ï¼Œæ£€æŸ¥é˜²ç«å¢™
sudo ufw status
# ç¡®ä¿ 3000 ç«¯å£å·²å¼€æ”¾

# 5. ä½¿ç”¨æœåŠ¡å™¨ IP è®¿é—®
http://<æœåŠ¡å™¨å…¬ç½‘IP>:3000
```

### 3. æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: æ—¥å¿—ä¸­å‡ºç° "could not connect to database"

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. æ£€æŸ¥ PostgreSQL å¥åº·çŠ¶æ€
docker compose ps postgres

# 2. æ‰‹åŠ¨æµ‹è¯•æ•°æ®åº“è¿æ¥
docker compose exec postgres psql -U postgres -c "SELECT 1;"

# 3. æ£€æŸ¥å¯†ç é…ç½®æ˜¯å¦ä¸€è‡´
# ç¡®ä¿ docker-compose.yml å’Œ .env ä¸­çš„å¯†ç åŒ¹é…

# 4. é‡å¯æ•°æ®åº“æœåŠ¡
docker compose restart postgres
docker compose restart langfuse-web langfuse-worker
```

### 4. ClickHouse æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**: è¿½è¸ªæ•°æ®æŸ¥è¯¢ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. å¢åŠ  ClickHouse å†…å­˜
# åœ¨ docker-compose.yml ä¸­æ·»åŠ :
clickhouse:
  environment:
    CLICKHOUSE_MAX_MEMORY_USAGE: 8000000000  # 8GB

# 2. æ£€æŸ¥ç£ç›˜ I/O
iostat -x 1

# 3. ä¼˜åŒ–æ•°æ®åˆ†åŒº
# ClickHouse è‡ªåŠ¨æŒ‰æ—¶é—´åˆ†åŒºï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®

# 4. å®šæœŸæ¸…ç†æ—§æ•°æ®
# åœ¨ Langfuse UI: Settings â†’ Data Retention
```

### 5. MinIO åª’ä½“ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶**: ä¸Šä¼ å›¾ç‰‡/è§†é¢‘æ—¶æŠ¥é”™

**åŸå› **: MinIO å¤–éƒ¨ç«¯ç‚¹é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. æ£€æŸ¥ MinIO æ˜¯å¦å¯è®¿é—®
curl http://localhost:9090/minio/health/live

# 2. æ›´æ–°å¤–éƒ¨ç«¯ç‚¹é…ç½®
# æœ¬åœ°éƒ¨ç½²:
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://localhost:9090

# äº‘æœåŠ¡å™¨éƒ¨ç½²:
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://<æœåŠ¡å™¨å…¬ç½‘IP>:9090

# 3. ç¡®ä¿ 9090 ç«¯å£å·²å¼€æ”¾
sudo ufw allow 9090/tcp

# 4. é‡å¯æœåŠ¡
docker compose restart langfuse-web langfuse-worker
```

### 6. æ•°æ®ä¸¢å¤±é—®é¢˜

**ç—‡çŠ¶**: é‡å¯åæ•°æ®æ¶ˆå¤±

**åŸå› **: Volume æœªæ­£ç¡®æŒ‚è½½

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. æ£€æŸ¥ Volume æ˜¯å¦å­˜åœ¨
docker volume ls | grep langfuse

# 2. æ£€æŸ¥ Volume æŒ‚è½½
docker compose config | grep volumes

# 3. ä¸è¦ä½¿ç”¨ -v å‚æ•°åœæ­¢å®¹å™¨
docker compose down     # âœ… æ­£ç¡®
docker compose down -v  # âŒ ä¼šåˆ é™¤ Volumeï¼

# 4. æ¢å¤æ•°æ®ï¼ˆå¦‚æœæœ‰å¤‡ä»½ï¼‰
# å‚è€ƒ"æ•°æ®å¤‡ä»½ä¸æ¢å¤"ç« èŠ‚
```

### 7. æ—¥å¿—æ˜¾ç¤º "å‡†å¤‡æ—¶é—´è¿‡é•¿"

**ç—‡çŠ¶**: å¯åŠ¨è¶…è¿‡ 5 åˆ†é’Ÿä»æœªå°±ç»ª

**è§£å†³æ–¹æ¡ˆ:**

```bash
# 1. æ£€æŸ¥æ˜¯å¦é¦–æ¬¡è¿è¡Œï¼ˆéœ€è¦åˆå§‹åŒ–æ•°æ®åº“ï¼‰
# é¦–æ¬¡å¯åŠ¨çº¦éœ€ 3-5 åˆ†é’Ÿ

# 2. æ£€æŸ¥æ•°æ®åº“è¿ç§»çŠ¶æ€
docker compose logs langfuse-worker | grep migration

# 3. å¦‚æœè¿ç§»å¤±è´¥ï¼Œæ¸…ç©ºæ•°æ®åº“é‡è¯•
docker compose down -v
docker compose up

# 4. æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# 5. å¦‚æœ CPU/å†…å­˜ä¸è¶³ï¼Œå‡çº§æœºå™¨é…ç½®
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

#### PostgreSQL è°ƒä¼˜

åœ¨ `docker-compose.yml` ä¸­æ·»åŠ :

```yaml
postgres:
  command:
    - postgres
    - -c
    - shared_buffers=2GB
    - -c
    - effective_cache_size=6GB
    - -c
    - maintenance_work_mem=512MB
    - -c
    - max_connections=200
    - -c
    - random_page_cost=1.1
    - -c
    - effective_io_concurrency=200
```

#### ClickHouse è°ƒä¼˜

```yaml
clickhouse:
  ulimits:
    nofile:
      soft: 262144
      hard: 262144
  environment:
    CLICKHOUSE_MAX_MEMORY_USAGE: 8000000000
    CLICKHOUSE_MAX_THREADS: 8
```

### 2. Redis ä¼˜åŒ–

```yaml
redis:
  command: >
    --requirepass ${REDIS_AUTH}
    --maxmemory 2gb
    --maxmemory-policy allkeys-lru
    --save ""
```

### 3. ç½‘ç»œä¼˜åŒ–

```yaml
services:
  langfuse-web:
    networks:
      langfuse:
        ipv4_address: 172.20.0.10

networks:
  langfuse:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
```

### 4. èµ„æºé™åˆ¶

```yaml
services:
  langfuse-web:
    deploy:
      resources:
        limits:
          cpus: '4'
          memory: 4G
        reservations:
          cpus: '2'
          memory: 2G
```

### 5. æ•°æ®æ‘„å…¥ä¼˜åŒ–

```bash
# .env æ–‡ä»¶
# å¢åŠ æ‰¹é‡å†™å…¥é—´éš”ï¼ˆæé«˜ååé‡ï¼Œä½†å¢åŠ å»¶è¿Ÿï¼‰
LANGFUSE_INGESTION_CLICKHOUSE_WRITE_INTERVAL_MS=5000

# å¢åŠ é˜Ÿåˆ—å»¶è¿Ÿï¼ˆå‡å°‘æ•°æ®åº“å†™å…¥é¢‘ç‡ï¼‰
LANGFUSE_INGESTION_QUEUE_DELAY_MS=2000
```

---

## ğŸ’¾ æ•°æ®å¤‡ä»½ä¸æ¢å¤

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬

åˆ›å»º `backup.sh`:

```bash
#!/bin/bash
# Langfuse æ•°æ®å¤‡ä»½è„šæœ¬

BACKUP_DIR="/backup/langfuse"
DATE=$(date +%Y%m%d_%H%M%S)

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# 1. å¤‡ä»½ PostgreSQL
echo "å¤‡ä»½ PostgreSQL..."
docker compose exec -T postgres pg_dump -U postgres postgres | gzip > $BACKUP_DIR/postgres_$DATE.sql.gz

# 2. å¤‡ä»½ ClickHouse
echo "å¤‡ä»½ ClickHouse..."
docker compose exec -T clickhouse clickhouse-client --query="BACKUP DATABASE default TO Disk('backups', '$DATE')"

# 3. å¤‡ä»½ MinIO æ•°æ®
echo "å¤‡ä»½ MinIO..."
docker run --rm -v langfuse_minio_data:/data -v $BACKUP_DIR:/backup alpine \
  tar czf /backup/minio_$DATE.tar.gz -C /data .

# 4. å¤‡ä»½é…ç½®æ–‡ä»¶
echo "å¤‡ä»½é…ç½®æ–‡ä»¶..."
cp docker-compose.yml $BACKUP_DIR/docker-compose_$DATE.yml
cp .env $BACKUP_DIR/env_$DATE.backup

# 5. åˆ é™¤ 7 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.gz" -mtime +7 -delete
find $BACKUP_DIR -name "*.sql.gz" -mtime +7 -delete

echo "å¤‡ä»½å®Œæˆ: $BACKUP_DIR"
```

è®¾ç½®å®šæ—¶ä»»åŠ¡:

```bash
# æ·»åŠ åˆ° crontab
chmod +x backup.sh
crontab -e

# æ¯å¤©å‡Œæ™¨ 2 ç‚¹å¤‡ä»½
0 2 * * * /path/to/backup.sh >> /var/log/langfuse-backup.log 2>&1
```

### æ•°æ®æ¢å¤

#### æ¢å¤ PostgreSQL

```bash
# åœæ­¢æœåŠ¡
docker compose down

# å¯åŠ¨ PostgreSQL
docker compose up -d postgres

# ç­‰å¾…æ•°æ®åº“å°±ç»ª
sleep 10

# æ¢å¤æ•°æ®
gunzip < /backup/langfuse/postgres_20250122_020000.sql.gz | \
  docker compose exec -T postgres psql -U postgres postgres

# é‡å¯æ‰€æœ‰æœåŠ¡
docker compose up -d
```

#### æ¢å¤ ClickHouse

```bash
# æ¢å¤æ•°æ®
docker compose exec clickhouse clickhouse-client \
  --query="RESTORE DATABASE default FROM Disk('backups', '20250122_020000')"
```

#### æ¢å¤ MinIO

```bash
# åœæ­¢æœåŠ¡
docker compose down

# æ¢å¤æ•°æ®
docker run --rm -v langfuse_minio_data:/data -v /backup/langfuse:/backup alpine \
  tar xzf /backup/minio_20250122_020000.tar.gz -C /data

# é‡å¯æœåŠ¡
docker compose up -d
```

---

## ğŸ”„ å‡çº§æŒ‡å—

### æ£€æŸ¥å½“å‰ç‰ˆæœ¬

```bash
# æŸ¥çœ‹é•œåƒæ ‡ç­¾
docker compose images

# æŸ¥çœ‹ Langfuse ç‰ˆæœ¬
docker compose exec langfuse-web cat /app/package.json | grep version
```

### å‡çº§æ­¥éª¤

```bash
# 1. åœæ­¢æœåŠ¡
docker compose down

# 2. å¤‡ä»½æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰
./backup.sh

# 3. æ‹‰å–æœ€æ–°é•œåƒ
docker compose pull

# 4. å¯åŠ¨æœåŠ¡ï¼ˆè‡ªåŠ¨è¿è¡Œæ•°æ®åº“è¿ç§»ï¼‰
docker compose up -d

# 5. æŸ¥çœ‹æ—¥å¿—ï¼Œç¡®è®¤è¿ç§»æˆåŠŸ
docker compose logs -f langfuse-worker | grep migration

# 6. éªŒè¯åŠŸèƒ½
curl http://localhost:3000/api/public/health
```

### ç‰ˆæœ¬å›æ»š

```bash
# 1. åœæ­¢æœåŠ¡
docker compose down

# 2. ä¿®æ”¹é•œåƒç‰ˆæœ¬
# docker-compose.yml:
image: docker.io/langfuse/langfuse:2  # å›æ»šåˆ° v2

# 3. æ¢å¤æ•°æ®åº“å¤‡ä»½ï¼ˆå¦‚æœæ•°æ®ç»“æ„æœ‰å˜åŒ–ï¼‰
# ...

# 4. å¯åŠ¨æœåŠ¡
docker compose up -d
```

### ç‰ˆæœ¬è¿ç§»æ³¨æ„äº‹é¡¹

**v2 â†’ v3 é‡å¤§å˜æ›´:**

1. **æ–°å¢ ClickHouse ä¾èµ–**: éœ€è¦é…ç½® ClickHouse ç¯å¢ƒå˜é‡
2. **æ•°æ®è¿ç§»**: é¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨å°†æ•°æ®ä» PostgreSQL è¿ç§»åˆ° ClickHouseï¼ˆå¯èƒ½è€—æ—¶è¾ƒé•¿ï¼‰
3. **é…ç½®å˜æ›´**: éƒ¨åˆ†ç¯å¢ƒå˜é‡åç§°æ”¹å˜ï¼Œéœ€æ›´æ–° `.env` æ–‡ä»¶

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å®˜æ–¹æ–‡æ¡£

- [Langfuse å®˜æ–¹æ–‡æ¡£](https://langfuse.com/docs)
- [è‡ªæ‰˜ç®¡éƒ¨ç½²æŒ‡å—](https://langfuse.com/self-hosting)
- [Docker Compose éƒ¨ç½²](https://langfuse.com/self-hosting/deployment/docker-compose)
- [Kubernetes éƒ¨ç½²](https://langfuse.com/self-hosting/deployment/kubernetes)

### SDK é›†æˆ

- [Python SDK](https://langfuse.com/docs/sdk/python)
- [JavaScript/TypeScript SDK](https://langfuse.com/docs/sdk/typescript)
- [LangChain é›†æˆ](https://langfuse.com/docs/integrations/langchain)
- [LlamaIndex é›†æˆ](https://langfuse.com/docs/integrations/llama-index)

### æœ€ä½³å®è·µ

- [æç¤ºè¯ç®¡ç†](https://langfuse.com/docs/prompts)
- [è¯„ä¼°ä¸æµ‹è¯•](https://langfuse.com/docs/scores)
- [æ•°æ®é›†ç®¡ç†](https://langfuse.com/docs/datasets)
- [æˆæœ¬è¿½è¸ª](https://langfuse.com/docs/cost)

---

## ğŸ†˜ è·å–æ”¯æŒ

### ç¤¾åŒºæ”¯æŒ

- **GitHub Issues**: https://github.com/langfuse/langfuse/issues
- **Discord ç¤¾åŒº**: https://discord.gg/7NXusRtqYU
- **å®˜æ–¹è®ºå›**: https://langfuse.com/community

### å•†ä¸šæ”¯æŒ

- **ä¼ä¸šç‰ˆ**: æä¾›ä¸“ä¸šæŠ€æœ¯æ”¯æŒå’Œ SLA ä¿éšœ
- **å’¨è¯¢æœåŠ¡**: æ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨åŠ å›º
- **è”ç³»æ–¹å¼**: https://langfuse.com/enterprise

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´è¯´æ˜ |
|------|------|---------|
| 2025-01-22 | 1.0 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäº Langfuse v3 |

---

## âš–ï¸ è®¸å¯è¯

æœ¬æ–‡æ¡£é‡‡ç”¨ MIT è®¸å¯è¯ã€‚Langfuse é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿åé¦ˆã€‚** ğŸ‰

